#!/usr/bin/env python3

import sys

sys.dont_write_bytecode = True

try:
    from lib.controller.controller import start
    from lib.core.common import searchPasswordSupported
    from lib.core.data import cmdLineOptions
    from lib.core.data import logger
    from lib.core.exception import CrackerFilePathException
    from lib.core.option import init
    from lib.core.option import initConf
    from lib.parse.cmdline import cmdLineParser
except KeyboardInterrupt:
    print("user aborted")
    raise SystemExit

def main():
    try:
        searchPasswordSupported()   # generate PASSWORD_SUPPORTED list
        cmdLineOptions.update(cmdLineParser().__dict__) # get cmdline options
        initConf()  # init attributes of conf
        init()  # init cmdline options to conf
        start() # start engine

    except CrackerFilePathException:
        logger.critical('File Not Found!')
        sys.exit(1)

    except KeyboardInterrupt:
        print("user aborted")

if __name__ == '__main__':
    main()
